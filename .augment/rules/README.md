# Augment rules for `cruises-mobile`

## 1) Общий принцип
Этот репозиторий **только редактируется** (пишем код и конфиги). 
**Сборка/запуск/тестирование локально не требуются и по умолчанию не выполняются.**

Вся проверка делается в **GitHub Actions** на **self-hosted** удалённом **macOS runner**.

## 2) Команды и терминал
- Не запускать локально `flutter pub get`, `flutter test`, `flutter build`, `pod install`, Gradle и т.п.
- Любые команды (даже «безопасные») выполнять **только по явному запросу пользователя**.
- Если нужно проверить что-то, вместо локального запуска:
  - просим пользователя запустить workflow,
  - либо (если пользователь попросил) триггерим GitHub Actions.

## 3) CI — единственный источник правды
- Ориентируемся на версии Flutter/Dart, которые используются в workflow.
- Изменения зависимостей делаем так, чтобы они разрешались на CI runner.

## 4) Коммиты
- После каждого логического изменения делаем `git commit` **и** `git push` автоматически,
  если пользователь **явно включил авто-режим** (например: «коммит и пуш делай автоматически после каждого изменения»).
  - Такое указание считается **постоянным разрешением в рамках текущего чата**, пока пользователь его не отменит.
  - При необходимости агент один раз уточняет целевую ветку/remote; дальше не переспрашивает.
  - Commit message: коротко и по сути (можно в стиле `fix: ...` / `chore: ...`).

- Если авто-режим **не включён**, действуем по старому правилу: предлагаем commit message и коммитим/пушим только по явной команде пользователя.

## 5) Триггер GitHub Actions
- По умолчанию агент **не запускает** workflow сам (может требовать токены/доступ).
- Если пользователь попросил, можно запустить сборку/тесты:
  - через GitHub Actions расширение в VSCode (если настроено у пользователя),
  - либо через CLI/gh (если доступ разрешён пользователем).

## 6) Стиль работы
- Минимальные, точечные изменения.
- После каждой правки: кратко объяснить, что изменено и почему.
- Если CI выдаёт ошибку — просим лог и правим следующей итерацией.

