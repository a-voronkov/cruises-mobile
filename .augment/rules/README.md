# Augment rules for `cruises-mobile`

## 1) Общий принцип
Этот репозиторий **только редактируется** (пишем код и конфиги). 
**Сборка/запуск/тестирование локально не требуются и по умолчанию не выполняются.**

Вся проверка делается в **GitHub Actions** на **self-hosted** удалённом **macOS runner**.

## 2) Команды и терминал
- Не запускать локально `flutter pub get`, `flutter test`, `flutter build`, `pod install`, Gradle и т.п.
- Любые команды (даже «безопасные») выполнять **только по явному запросу пользователя**.
- Если нужно проверить что-то, вместо локального запуска:
  - просим пользователя запустить workflow,
  - либо (если пользователь попросил) триггерим GitHub Actions.

## 3) CI — единственный источник правды
- Ориентируемся на версии Flutter/Dart, которые используются в workflow.
- Изменения зависимостей делаем так, чтобы они разрешались на CI runner.

## 4) Коммиты

- Если пользователь **включил авто-режим**, то после каждого логического изменения агент **автоматически** делает `git commit` и `git push`.
  - Разрешение считается **постоянным в рамках текущего чата**, пока пользователь его не отменит.
  - В текущих задачах: **всегда пушим в ветку `main` (origin/main)** без дополнительных уточнений.
  - Commit message: коротко и по сути (например: `fix: ...`, `ci: ...`, `chore: ...`).

- Если авто-режим **не включён**, коммит/пуш делаем только по явной команде пользователя.

## 5) Триггер GitHub Actions

- CI workflow настроен на **автозапуск при каждом `push` в `main`**.
- Ручной запуск (`workflow_dispatch`) остаётся для случаев, когда нужно:
  - пересобрать без нового коммита,
  - сделать релиз/артефакты по кнопке (если workflow это поддерживает).
- По умолчанию агент **не триггерит** workflow вручную. Если пользователь попросил — можно запустить/перезапустить через UI GitHub Actions (или через `gh`, если доступ разрешён пользователем).

## 6) Стиль работы
- Минимальные, точечные изменения.
- После каждой правки: кратко объяснить, что изменено и почему.
- Если CI выдаёт ошибку — просим лог и правим следующей итерацией.

